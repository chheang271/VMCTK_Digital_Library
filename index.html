<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>VMCTK Digital Library</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* --- (keep all your previous CSS) --- */
    .featured-card {
      border: 2px solid #facc15;
      background-color: rgba(250, 204, 21, 0.1);
      animation: pulseGlow 2s infinite;
    }
    @keyframes pulseGlow {
      0%, 100% { box-shadow: 0 0 10px rgba(250,204,21,0.4); }
      50% { box-shadow: 0 0 25px rgba(250,204,21,0.8); }
    }
  </style>
</head>

<body>
  <!-- Loading Screen (same as before) -->
  <div id="loadingScreen">
    <div class="spinner"></div>
    <p>üìö Loading VMCTK Digital Library...</p>
    <p id="quoteText" class="mt-3 text-center text-sm italic opacity-90"></p>
  </div>

  <!-- Header (same as before) -->
  <header class="bg-white dark:bg-gray-800 shadow p-4 flex flex-col items-center relative transition-colors duration-300">
    <button id="themeToggle" title="Toggle dark mode">üåô</button>
    <img id="logoImage" src="LOGO VMC.png" class="w-24 mb-2 transition duration-300 ease-in-out opacity-100">
    <h1 class="text-2xl font-bold text-center">VMCTK Digital Library</h1>
    <p id="subtitle" class="text-gray-500 dark:text-gray-300 text-center">Volunteer for My Community</p>
    <div class="mt-2">
      <button id="enBtn" class="px-3 py-1 bg-blue-500 text-white rounded">English</button>
      <button id="khBtn" class="px-3 py-1 bg-gray-300 ml-2 rounded">·ûÅ·üí·ûò·üÇ·ûö</button>
    </div>
  </header>

  <section class="p-4 flex justify-center">
    <input id="searchInput" type="text" placeholder="Search books..." class="w-full max-w-xl p-2 border rounded shadow">
  </section>

  <!-- ‚≠ê Featured Section -->
  <section id="featuredSection" class="p-4 hidden">
    <h2 class="text-2xl font-bold text-yellow-500 mb-3 text-center">‚≠ê Featured Books</h2>
    <div id="featuredList" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6"></div>
  </section>

  <!-- All Books -->
  <section id="bookList" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 p-4"></section>

  <!-- Modal + Footer (same as before) -->

  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
  <script>
    const CSV_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vS75RiAFZNe61Mrh8jhMpnYX-o0XaJynvA2Ho2kfDBzrkeA1ewCftd90oZ2WDIAmeTvHX5c1uKoxIGU/pub?output=csv";
    const loadingScreen = document.getElementById("loadingScreen");

    // üåü Quotes (same code as before)
    const quotes = [/* your quotes list here */];
    function showRandomQuote() { /* same function as before */ }
    showRandomQuote();

    let books = [];
    let currentIndex = 0;

    function getHdCover(url) {
      if (!url) return "covers/placeholder.jpg";
      const match = url.match(/[-\w]{25,}/);
      return match ? `https://drive.google.com/thumbnail?id=${match[0]}&sz=w2000` : url;
    }

    async function loadBooks() {
      const response = await fetch(CSV_URL);
      const csvText = await response.text();
      const results = Papa.parse(csvText, { header: true });
      books = results.data.filter(b => b.Title);

      const container = document.getElementById("bookList");
      const featuredSection = document.getElementById("featuredSection");
      const featuredList = document.getElementById("featuredList");
      container.innerHTML = "";
      featuredList.innerHTML = "";

      const featuredBooks = books.filter(b => b.Featured && b.Featured.toLowerCase() === "yes").slice(0, 3);

      if (featuredBooks.length > 0) {
        featuredSection.classList.remove("hidden");
        featuredBooks.forEach((book, index) => {
          const card = document.createElement("div");
          card.className = "featured-card rounded-lg shadow transition p-4 text-center";
          card.innerHTML = `
            <img src="${getHdCover(book["Cover Link"])}" class="book-cover" />
            <h3 class="text-lg font-bold text-yellow-500">${book.Title}</h3>
            <p class="text-gray-600 dark:text-gray-300">${book.Author}</p>
            <p class="text-sm text-blue-500">${book.Language}</p>
          `;
          card.addEventListener("click", () => openModal(books.indexOf(book)));
          featuredList.appendChild(card);
        });
      }

      // Normal books
      books.forEach((book, index) => {
        const card = document.createElement("div");
        card.className = "book-card rounded-lg shadow hover:shadow-lg transition p-4";
        card.innerHTML = `
          <img src="${getHdCover(book["Cover Link"])}" class="book-cover" />
          <h2 class="book-title text-lg text-center cursor-pointer">${book.Title}</h2>
          <p class="book-author text-center">${book.Author}</p>
          <p class="book-lang text-sm text-blue-500 text-center">${book.Language}</p>
          <p class="book-desc mt-2 text-center">${book.Description}</p>
        `;
        card.querySelector(".book-cover").addEventListener("click", () => openModal(index));
        card.querySelector(".book-title").addEventListener("click", () => openModal(index));
        container.appendChild(card);
      });

      loadingScreen.classList.add("fade-out");
    }

    // (Keep all your modal, tooltip, search, theme, and keyboard code the same)
    loadBooks();
  </script>
</body>
</html>
